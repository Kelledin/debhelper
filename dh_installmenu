#!/bin/sh -e
#
# Integration with debian menu system:
#
# If debian/menu file exists, save it to debian/$TMP/usr/lib/menu/$PACKAGE
# If debian/menu-method file exists, save it to 
# debian/$TMP/etc/menu-methods/$PACKAGE

PATH=debian:$PATH:/usr/lib/debhelper
source dh_lib

for PACKAGE in $DH_DOPACKAGES; do
	TMP=`tmpdir $PACKAGE`
	EXT=`pkgext $PACKAGE`

	if [ -e debian/${EXT}menu ]; then
		if [ ! -d debian/$TMP/usr/lib/menu ]; then
			doit "install -d debian/$TMP/usr/lib/menu"
		fi
		doit "install -p -m644 debian/${EXT}menu debian/$TMP/usr/lib/menu/$PACKAGE"
	fi

	if [ -e debian/${EXT}menu-method ]; then
		if [ ! -d debian/$TMP/etc/menu-methods ]; then
			doit "install -d debian/$TMP/etc/menu-methods"
		fi
		doit "install -p debian/${EXT}menu-method debian/$TMP/etc/menu-methods/$PACKAGE"
	fi
done
